<!doctype html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>ToDo WebApp</title>
  <link rel="stylesheet" href="css/style.css?v=1" />
</head>
<body>
  <div class="app">

    <!-- Header -->
    <header class="topbar">
      <div class="topbar__left">
        <div class="avatar">M</div>
        <div class="topbar__meta">
          <div class="topbar__title">ToDo</div>
          <div class="topbar__subtitle">–°–µ–≥–æ–¥–Ω—è: <span id="todayText">‚Äî</span></div>
        </div>
      </div>

      <button class="icon-btn" aria-label="–£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è">
        <span class="icon">üîî</span>
      </button>
    </header>

    <!-- Content -->
    <main class="content">

      <!-- HOME -->
      <section class="screen is-active" data-screen="home">
        <div class="card hero">
          <div class="hero__text">
            <div class="hero__label">–§–æ–∫—É—Å –Ω–∞ —Å–µ–≥–æ–¥–Ω—è</div>
            <div class="hero__value"><span id="doneCount">0</span>/<span id="planCount">5</span> –∑–∞–¥–∞—á</div>
            <div class="hero__hint">–ó–∞–∫—Ä–æ–π –∑–∞–¥–∞—á–∏ ‚Üí –ø–æ–ª—É—á–∏—à—å ‚Äú–Ω–∞–≥—Ä–∞–¥—É‚Äù.</div>
          </div>
          <button class="btn btn-primary" id="addQuickTaskBtn">+ –ë—ã—Å—Ç—Ä–∞—è –∑–∞–¥–∞—á–∞</button>
        </div>

        <div class="grid-2">
          <div class="card stat">
            <div class="stat__label">–®–∞–≥–∏</div>
            <div class="stat__value">12 000</div>
            <div class="stat__hint">—Ü–µ–ª—å 10‚Äì15k</div>
          </div>
          <div class="card stat">
            <div class="stat__label">–§–æ–∫—É—Å</div>
            <div class="stat__value">25 –º–∏–Ω</div>
            <div class="stat__hint">–ø–æ–º–∏–¥–æ—Ä</div>
          </div>
        </div>

        <div class="card">
          <div class="section-head">
            <div class="section-title">–ë—ã—Å—Ç—Ä—ã–µ –¥–µ–π—Å—Ç–≤–∏—è</div>
            <button class="link-btn" id="openTasksFromHome">–í—Å–µ –∑–∞–¥–∞—á–∏</button>
          </div>

          <div class="quick-actions">
            <button class="qa">
              <span class="qa__icon">‚úÖ</span>
              <span class="qa__text">–î–æ–±–∞–≤–∏—Ç—å –∑–∞–¥–∞—á—É</span>
            </button>
            <button class="qa" id="goPomodoro">
              <span class="qa__icon">üçÖ</span>
              <span class="qa__text">–ó–∞–ø—É—Å—Ç–∏—Ç—å –ø–æ–º–∏–¥–æ—Ä</span>
            </button>
            <button class="qa">
              <span class="qa__icon">üéÆ</span>
              <span class="qa__text">–ù–∞–≥—Ä–∞–¥–∞</span>
            </button>
          </div>
        </div>

        <div class="card">
          <div class="section-title">–ü–ª–∞–Ω –Ω–∞ —Å–µ–≥–æ–¥–Ω—è</div>
          <ul class="task-list" id="homeTaskList">
            <li class="task">
              <label class="chk">
                <input type="checkbox" class="task__check" />
                <span class="chk__ui"></span>
              </label>
              <div class="task__body">
                <div class="task__title">–£—á—ë–±–∞ / –ø–∞—Ä—ã</div>
                <div class="task__meta">–¥–æ 14:00</div>
              </div>
              <span class="pill">–≤–∞–∂–Ω–æ</span>
            </li>

            <li class="task">
              <label class="chk">
                <input type="checkbox" class="task__check" />
                <span class="chk__ui"></span>
              </label>
              <div class="task__body">
                <div class="task__title">–ü—Ä–∞–∫—Ç–∏–∫–∞ (Kotlin/–±–æ—Ç)</div>
                <div class="task__meta">40‚Äì60 –º–∏–Ω</div>
              </div>
              <span class="pill pill-soft">–∫–æ–¥</span>
            </li>
          </ul>
        </div>
      </section>

      <!-- POMODORO -->
      <section class="screen" data-screen="pomodoro">
        <div class="card">
          <div class="section-title">–ü–æ–º–∏–¥–æ—Ä üçÖ</div>

          <div class="timer">
            <div class="timer__ring" aria-hidden="true"></div>
            <div class="timer__time" id="timerText">25:00</div>
            <div class="timer__hint">–§–æ–∫—É—Å ‚Üí –ø–µ—Ä–µ—Ä—ã–≤ ‚Üí —Ñ–æ–∫—É—Å</div>
          </div>

          <div class="row">
            <button class="btn btn-primary" id="startTimerBtn">–°—Ç–∞—Ä—Ç</button>
            <button class="btn btn-ghost" id="resetTimerBtn">–°–±—Ä–æ—Å</button>
          </div>
        </div>

        <div class="card">
          <div class="section-title">–†–µ–∂–∏–º</div>
          <div class="segmented" role="tablist" aria-label="–†–µ–∂–∏–º –ø–æ–º–∏–¥–æ—Ä–∞">
            <button class="seg is-active" data-min="25">25</button>
            <button class="seg" data-min="45">45</button>
            <button class="seg" data-min="50">50</button>
          </div>
          <div class="muted">–í—ã–±–µ—Ä–∏ –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å —Ñ–æ–∫—É—Å–∞, –ø–æ—Ç–æ–º –∂–º–∏ ‚Äú–°—Ç–∞—Ä—Ç‚Äù.</div>
        </div>
      </section>

      <!-- CLICK -->
      <section class="screen" data-screen="click">
        <div class="card">
          <div class="section-title">Click ‚ö°</div>
          <div class="muted">–ü–æ–∫–∞ –∑–∞–≥–ª—É—à–∫–∞. –°—é–¥–∞ –º–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å ‚Äú–±—ã—Å—Ç—Ä—ã–µ –æ—Ç–º–µ—Ç–∫–∏‚Äù: –≤–æ–¥–∞, –∑–∞—Ä—è–¥–∫–∞, —à–∞–≥–∏.</div>
          <div class="chips">
            <button class="chip">üíß –í–æ–¥–∞</button>
            <button class="chip">üèãÔ∏è –¢—Ä–µ–Ω—è</button>
            <button class="chip">üö∂ –®–∞–≥–∏</button>
            <button class="chip">üìö –£—á—ë–±–∞</button>
          </div>
        </div>
      </section>

      <!-- TASKS -->
      <section class="screen" data-screen="tasks">
        <div class="card">
          <div class="section-head">
            <div class="section-title">–ó–∞–¥–∞—á–∏</div>
            <button class="btn btn-primary btn-sm" id="addTaskBtn">+ –î–æ–±–∞–≤–∏—Ç—å</button>
          </div>

          <div class="filters">
            <button class="filter is-active" data-filter="all">–í—Å–µ</button>
            <button class="filter" data-filter="today">–°–µ–≥–æ–¥–Ω—è</button>
            <button class="filter" data-filter="done">–ì–æ—Ç–æ–≤–æ</button>
          </div>

          <ul class="task-list" id="tasksList">
            <li class="task">
              <label class="chk">
                <input type="checkbox" class="task__check" />
                <span class="chk__ui"></span>
              </label>
              <div class="task__body">
                <div class="task__title">–ö—É–ø–∏—Ç—å –ø—Ä–æ–¥—É–∫—Ç—ã</div>
                <div class="task__meta">–≤–µ—á–µ—Ä–æ–º</div>
              </div>
              <span class="pill pill-soft">–¥–æ–º</span>
            </li>

            <li class="task">
              <label class="chk">
                <input type="checkbox" class="task__check" />
                <span class="chk__ui"></span>
              </label>
              <div class="task__body">
                <div class="task__title">–ü–æ–º–∏–¥–æ—Ä 25 –º–∏–Ω</div>
                <div class="task__meta">—Ñ–æ–∫—É—Å</div>
              </div>
              <span class="pill">—Ñ–æ–∫—É—Å</span>
            </li>
          </ul>
        </div>
      </section>

      <!-- PROFILE -->
      <section class="screen" data-screen="profile">
        <div class="card profile-card">
          <div class="profile-card__top">
            <div class="avatar avatar-lg">M</div>
            <div>
              <div class="profile-name">–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å</div>
              <div class="muted">–ù–∞—Å—Ç—Ä–æ–π–∫–∏ –∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞</div>
            </div>
          </div>

          <div class="profile-actions">
            <button class="row-btn">
              <span>‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∏</span>
              <span class="chev">‚Ä∫</span>
            </button>
            <button class="row-btn">
              <span>üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞</span>
              <span class="chev">‚Ä∫</span>
            </button>
            <button class="row-btn">
              <span>üîí –ü—Ä–∏–≤–∞—Ç–Ω–æ—Å—Ç—å</span>
              <span class="chev">‚Ä∫</span>
            </button>
          </div>
        </div>
      </section>

    </main>

    <!-- Bottom Nav -->
    <nav class="bottom-nav" aria-label="–ù–∞–≤–∏–≥–∞—Ü–∏—è">
      <button class="nav-btn is-active" data-target="home" aria-label="–ì–ª–∞–≤–Ω–∞—è">
        <span class="nav-ico">üè†</span><span class="nav-txt">–ì–ª–∞–≤–Ω–∞—è</span>
      </button>

      <button class="nav-btn" data-target="pomodoro" aria-label="–ü–æ–º–∏–¥–æ—Ä">
        <span class="nav-ico">üçÖ</span><span class="nav-txt">–ü–æ–º–∏–¥–æ—Ä</span>
      </button>

      <button class="nav-btn" data-target="click" aria-label="Click">
        <span class="nav-ico">‚ö°</span><span class="nav-txt">Click</span>
      </button>

      <button class="nav-btn" data-target="tasks" aria-label="–ó–∞–¥–∞—á–∏">
        <span class="nav-ico">‚úÖ</span><span class="nav-txt">–ó–∞–¥–∞—á–∏</span>
      </button>

      <button class="nav-btn" data-target="profile" aria-label="–ü—Ä–æ—Ñ–∏–ª—å">
        <span class="nav-ico">üë§</span><span class="nav-txt">–ü—Ä–æ—Ñ–∏–ª—å</span>
      </button>
    </nav>

  </div>

  <script>
    // --- Date label
    const d = new Date();
    const opts = { weekday: "short", day: "2-digit", month: "short" };
    document.getElementById("todayText").textContent = d.toLocaleDateString("ru-RU", opts);

    // --- Navigation
    const buttons = document.querySelectorAll(".nav-btn");
    const screens = document.querySelectorAll(".screen");

    function setActive(target) {
      screens.forEach(s => s.classList.toggle("is-active", s.dataset.screen === target));
      buttons.forEach(b => b.classList.toggle("is-active", b.dataset.target === target));
      window.scrollTo({ top: 0, behavior: "instant" });
    }

    buttons.forEach(btn => btn.addEventListener("click", () => setActive(btn.dataset.target)));

    // quick links
    document.getElementById("goPomodoro").addEventListener("click", () => setActive("pomodoro"));
    document.getElementById("openTasksFromHome").addEventListener("click", () => setActive("tasks"));

    // --- Minimal Pomodoro
    let timer = null;
    let totalSec = 25 * 60;
    let remaining = totalSec;

    const timerText = document.getElementById("timerText");

    function renderTime(sec){
      const m = String(Math.floor(sec / 60)).padStart(2, "0");
      const s = String(sec % 60).padStart(2, "0");
      timerText.textContent = `${m}:${s}`;
    }
    renderTime(remaining);

    function stopTimer(){
      if (timer) clearInterval(timer);
      timer = null;
    }

    document.getElementById("startTimerBtn").addEventListener("click", () => {
      if (timer) return;
      timer = setInterval(() => {
        remaining -= 1;
        renderTime(remaining);
        if (remaining <= 0){
          stopTimer();
          remaining = totalSec;
          renderTime(remaining);
          alert("–§–æ–∫—É—Å –∑–∞–≤–µ—Ä—à—ë–Ω. –ü–µ—Ä–µ—Ä—ã–≤ 5 –º–∏–Ω—É—Ç üôÇ");
        }
      }, 1000);
    });

    document.getElementById("resetTimerBtn").addEventListener("click", () => {
      stopTimer();
      remaining = totalSec;
      renderTime(remaining);
    });

    document.querySelectorAll(".seg").forEach(seg => {
      seg.addEventListener("click", () => {
        document.querySelectorAll(".seg").forEach(s => s.classList.remove("is-active"));
        seg.classList.add("is-active");
        const min = Number(seg.dataset.min);
        totalSec = min * 60;
        remaining = totalSec;
        renderTime(remaining);
        stopTimer();
      });
    });
  </script>
</body>
</html>
